<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
    which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
    There has to be one entity for each item to be referenced. 
    An alternate method (rfc include) is described in the references. -->

<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC2328 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2328.xml">
<!ENTITY RFC3688 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3688.xml">
<!ENTITY RFC6020 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6020.xml">
<!ENTITY RFC7950 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7950.xml">
<!ENTITY RFC8174 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8174.xml">
<!ENTITY RFC8340 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8340.xml">
<!ENTITY RFC8342 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8342.xml">
<!ENTITY IsisYANG SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-isis-yang-isis-cfg.xml">
<!ENTITY OSPFYANG SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-ospf-yang.xml">
<!ENTITY DynamicFlooding SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-lsr-dynamic-flooding.xml">

]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs), 
    please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
    (Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="yes" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space 
    (using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="std" docName="draft-dontula-lsr-yang-dynamic-flooding-02" ipr="trust200902">
<!-- category values: std, bcp, info, exp, and historic
    ipr values: trust200902, noModificationTrust200902, noDerivativesTrust200902,
       or pre5378Trust200902
    you can add the attributes updates="NNNN" and obsoletes="NNNN" 
    they will automatically be output with "(if approved)" -->

 <!-- ***** FRONT MATTER ***** -->

 <front>
   <!-- The abbreviated title is used in the page header - it is only necessary if the 
        full title is longer than 39 characters -->

   <title abbrev="YANG Data Model for Dynamic Flooding">
     YANG Data Model for Dynamic Flooding
   </title>

   <!-- add 'role="editor"' below for the editors if appropriate -->

   <!-- Another author who claims to be an editor -->

   <author fullname="Srinath Dontula" initials="S." 
           surname="Dontula">
     <organization>ATT</organization>

     <address>
       <postal>
         <street>200 S. Laurel Ave</street>

         <!-- Reorder these if your country does things differently -->

         <city>Middletown</city>

         <region>New Jersey</region>

         <code>07748</code>

         <country>United States of America</country>
       </postal>

       <phone></phone>

       <email>sd947e@att.com</email>

       <!-- uri and facsimile elements may also be added -->
     </address>
   </author>

   <author fullname="Tony Li" initials="T." 
           surname="Li">
     <organization>Arista Networks</organization>

     <address>
       <postal>
         <street>5453 Great America Parkway</street>

         <!-- Reorder these if your country does things differently -->

         <city>Santa Clara</city>

         <region>California</region>

         <code>95054</code>

         <country>United States of America</country>
       </postal>

       <phone></phone>

       <email>tony.li@tony.li</email>

       <!-- uri and facsimile elements may also be added -->
     </address>
   </author>

   <author fullname="Athar Siddiqui" initials="A." 
           surname="Siddiqui">
     <organization>ATT</organization>

     <address>
       <postal>
         <street>200 S. Laurel Ave</street>

         <!-- Reorder these if your country does things differently -->

         <city>Middletown</city>

         <region>New Jersey</region>

         <code>07748</code>

         <country>United States of America</country>
       </postal>

       <phone></phone>

       <email>as2745@att.com</email>

       <!-- uri and facsimile elements may also be added -->
     </address>
   </author>
   <date year="2020" month="03"/>

   <!-- If the month and year are both specified and are the current ones, xml2rfc will fill 
        in the current day for you. If only the current year is specified, xml2rfc will fill 
         in the current day and month for you. If the year is not the current one, it is 
         necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the 
         purpose of calculating the expiry date).  With drafts it is normally sufficient to 
         specify just the year. -->

   <!-- Meta-data Declarations -->

   <area>Routing</area>

   <workgroup>Internet Engineering Task Force</workgroup>

   <!-- WG name at the upperleft corner of the doc,
        IETF is fine for individual submissions.  
        If this element is not present, the default is "Network Working Group",
        which is used by the RFC Editor as a nod to the history of the IETF. -->

   <keyword>IS-IS multi-level hierarchical link-state routing</keyword>

   <!-- Keywords will be incorporated into HTML output
        files in a meta tag but they have no effect on text or nroff
        output. If you submit your draft to the RFC Editor, the
        keywords will be used for the search engine. -->

   <abstract>
     <t>
       This document defines YANG data models that can be used to
       configure and manage Dynamic Flooding for IS-IS and OSPF.
     </t>
   </abstract>
 </front>

 <middle>
   <section title="Requirements Language">
     <t>
       The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
       NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
       "OPTIONAL" in this document are to be interpreted as described
       in <eref target="https://tools.ietf.org/html/bcp14">BCP
       14</eref> <xref target="RFC2119"/> <xref target="RFC8174"/>
       when, and only when, they appear in all capitals, as shown
       here.
     </t>
   </section>

   <section title="Introduction">
     <t>
       This document defines a <xref target="RFC7950">YANG</xref> data
       model for <xref target="ISO10589">IS-IS</xref> and <xref
       target="RFC2328">OSPF</xref> routing protocols.
     </t>
     <t>
       The YANG data models in this document conform to the Network
       Management Datastore Architecture defined in <xref target="RFC8342"/>.
     </t>
     <section title="Tree Diagrams">
       <t>
         Tree diagrams used in this document follow the notation defined in
         <xref target="RFC8340"/>.
       </t>
     </section>
   </section>

   <section anchor="OSPF" title="OSPF Data Model">
     <section title="Tree Diagram">
       <figure align="left">
         <artwork align="left"><![CDATA[

module: ietf-dynamic-flooding-ospf
  augment /rt:routing/rt:control-plane-protocols
      /rt:control-plane-protocol/ospf:ospf/ospf:areas/ospf:area:
    +--rw dynamic-flooding {dynamic-flooding-ospf}?
       +--rw enable?        boolean
       +--rw area-leader
          +--rw enable?      boolean
          +--rw priority?    uint8
          +--rw algorithm?   uint8
  augment /rt:routing/rt:control-plane-protocols
      /rt:control-plane-protocol/ospf:ospf/ospf:areas/ospf:area
      /ospf:database/ospf:area-scope-lsa-type/ospf:area-scope-lsas
      /ospf:area-scope-lsa/ospf:version/ospf:ospfv2/ospf:ospfv2
      /ospf:body/ospf:opaque:
    +--ro area-leader-tlv {dynamic-flooding-ospf}?
    |  +--ro priority?    uint8
    |  +--ro algorithm?   uint8
    +--ro dynamic-flooding-tlv {dynamic-flooding-ospf}?
       +--ro algorithms*   uint8
  augment /rt:routing/rt:control-plane-protocols
      /rt:control-plane-protocol/ospf:ospf/ospf:areas/ospf:area
      /ospf:database/ospf:area-scope-lsa-type/ospf:area-scope-lsas
      /ospf:area-scope-lsa/ospf:version/ospf:ospfv2/ospf:ospfv2
      /ospf:body:
    +--ro ospfv2-dynamic-flooding-opaque-lsa {dynamic-flooding-ospf}?
       +--ro ospfv2-area-router-id-tlv
       |  +--ro start-index?                  uint16
       |  +--ro last-flag?                    bits
       |  +--ro ospfv2-router-id-tlv-entry* []
       |     +--ro connection-type?         uint8
       |     +--ro number-of-ids?           uint16
       |     +--ro originating-router-id*   yang:dotted-quad
       +--ro flooding-path-tlv
          +--ro start-index?   uint16
          +--ro indices*       uint16
  augment /rt:routing/rt:control-plane-protocols
      /rt:control-plane-protocol/ospf:ospf/ospf:areas/ospf:area
      /ospf:database/ospf:area-scope-lsa-type/ospf:area-scope-lsas
      /ospf:area-scope-lsa/ospf:version/ospf:ospfv2/ospf:ospfv2
      /ospf:body/ospf:opaque/ospf:extended-link-opaque
      /ospf:extended-link-tlv:
    +--ro ospf-link-attributes-bits-tlv {dynamic-flooding-ospf}?
       +--ro link-attributes-bits?   bits
  augment /rt:routing/rt:control-plane-protocols
      /rt:control-plane-protocol/ospf:ospf/ospf:areas/ospf:area
      /ospf:database/ospf:area-scope-lsa-type/ospf:area-scope-lsas
      /ospf:area-scope-lsa/ospf:version/ospf:ospfv3/ospf:ospfv3
      /ospf:body/ospf:router-information:
    +--ro area-leader-tlv {dynamic-flooding-ospf}?
    |  +--ro priority?    uint8
    |  +--ro algorithm?   uint8
    +--ro dynamic-flooding-tlv {dynamic-flooding-ospf}?
       +--ro algorithms*   uint8
  augment /rt:routing/rt:control-plane-protocols
      /rt:control-plane-protocol/ospf:ospf/ospf:areas/ospf:area
      /ospf:database/ospf:area-scope-lsa-type/ospf:area-scope-lsas
      /ospf:area-scope-lsa/ospf:version/ospf:ospfv3/ospf:ospfv3
      /ospf:body:
    +--ro ospfv3-dynamic-flooding-opaque-lsa {dynamic-flooding-ospf}?
       +--ro ospfv3-area-router-id-tlv
       |  +--ro start-index?                  uint16
       |  +--ro last-flag?                    bits
       |  +--ro ospfv3-router-id-tlv-entry* []
       |     +--ro connection-type?        uint8
       |     +--ro number-of-ids?          uint16
       |     +--ro router-id
       |     |  +--ro originating-router-id*   yang:dotted-quad
       |     +--ro designated-router-id
       |        +--ro originating-router-id-list* []
       |           +--ro originating-router-id?   yang:dotted-quad
       |           +--ro inteface-id?             yang:dotted-quad
       +--ro flooding-path-tlv
          +--ro start-index?   uint16
          +--ro indices*       uint16

]]></artwork>
       </figure>
     </section>
     <section title="OSPF YANG Module">
       <figure align="left">
         <artwork align="left"><![CDATA[

<CODE BEGINS> file "ietf-dynamic-flooding-ospf@2019-09-01.yang"

module ietf-dynamic-flooding-ospf {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-dynamic-flooding-ospf";
  prefix ospf-df;

  import ietf-ospf {
    prefix ospf;
    reference
      "RFC AAAA: YANG Data Model for OSPF Protocol";
  }
  import ietf-yang-types {
    prefix yang;
    reference
      "RFC 6991: Common YANG Data Types";
  }
  import ietf-routing {
    prefix rt;
    reference
      "RFC 8349 - A YANG Data Model for Routing
       Management (NMDA Version)";
  }

  organization
    "IETF LSR - Link State Routing Working Group";
  contact
    "
    WG Web:
      <https://datatracker.ietf.org/group/lsr/about/>
    WG List:
      <mailto: lsr@ietf.org>

    Editor: Srinath Dontula
        <mailto: sd947e@att.com>
    Author: Tony Li
        <mailto: tony.li@tony.li>
    Author: Peter Psenak
        <mialto: ppsenak@cisco.com>
    Author: Les Ginsberg
        <mailto: ginsberg@cisco.com>
    Author: Huaimo Chen
        <mailto: hcen@futurewei.com>
    Author: Tony Przygienda
        <mailto: prz@juniper.net>
    Author: Dave Cooper
        <mailto: dave.cooper@centurylink.com>
    Author: Luay Jalil
        <mailto: luay.jalil@verizon.com>
    Author: Athar Siddiqui
        <mailto: athar@att.com>
    ";
 
  description
    "
     Copyright (c) 2019 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Simplified BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX
     (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
     for full legal notices.
    ";

  revision 2019-09-01 {
    description
      "Initial draft version.";
    reference
      "RFC XXXX: YANG Data Model for Dynamic Flooding";
  }

  feature dynamic-flooding-ospf {
    description
      "Support for OSPF dynamic flooding";
    reference
      " RFC YYYY: Dynamic Flooding on Dense Graphs";
  }

  /*
   *  identity ospfv2-dynamic-flooding-opaque-lsa {
   *    base ospf:ospfv2-area-scope-opaque-lsa;
   *    description
   *      "OSPFv2 dynamic-flooding-opaque-lsa.";
   *  }
   *
   *  identity ospfv3-dynamic-flooding-opaque-lsa {
   *    base ospf:ospfv3-lsa-type;
   *    description
   *      "OSPFv3 dynamic-flooding-opaque-lsa.";
   *  }
   */

  identity ospfv2-dynamic-flooding-opaque-lsa {
    base ospf:ospfv2-opaque-lsa-type;
    description
      "OSPFv2 Dynamic Flooding Opaque LSA - Type 10";
  }

  identity ospfv3-dynamic-flooding-opaque-lsa {
    base ospf:ospfv3-lsa-type;
    description
      "OSPFv3 Dynamic Flooding LSA - Type 16";
  }

  grouping ospf-area-leader-tlv {
    description
      "Area leader TLV for OSPFv2/OSPFv3.
       A TLV of RI LSA";
    leaf priority {
      type uint8;
      description
        "Router's priority for Area leader";
    }
    leaf algorithm {
      type uint8;
      description
        "Router's Algorithm to calculate the Flooding
         Topology.";
    }
  }

  grouping dynamic-flooding-tlv {
    description
      "Dynamic-flooding TLV for OSPFv2/OSPFv3.
       A TLV of RI LSA";
    leaf-list algorithms {
      type uint8;
      description
        "List of Algorithms supported by the
         advertising node";
    }
  }

  grouping ospfv2-area-router-id-tlv-entry {
    description
      "ospfv2 area router ID TLV enties";
    leaf connection-type {
      type uint8;
      description
        "Defines the connection type ";
    }
    leaf number-of-ids {
      type uint16;
      description
        "the number of ID present in this TLV entry";
    }
    leaf-list originating-router-id {
      type yang:dotted-quad;
      description
        "list of the originating-router-ids";
    }
  }

  grouping ospfv2-area-router-id-tlv {
    description
      "definition for OSPFv2 Dynamic flooding area
       router-ID TLV";
    leaf start-index {
      type uint16;
      description
        "Starting index of the first
         router/designated router ID";
    }
    leaf last-flag {
      type bits {
        bit last-router-designated-router-id {
          description
            "when set, this TLV is the
             last Index in the full list
             of router IDs for the area";
          reference
            "RFC XXXX: Dynamic Flooding
             on Dense Graphs";
        }
      }
      description
        "last flag";
    }
    list ospfv2-router-id-tlv-entry {
      description
        "list of ospfv2 router-ID TLV entries";
      uses ospfv2-area-router-id-tlv-entry;
    }
  }

  grouping ospfv3-area-router-id-tlv-entry {
    description
      "ospfv3 area router ID TLV enties";
    leaf connection-type {
      type uint8;
      description
        "Defines the connection type ";
    }
    leaf number-of-ids {
      type uint16;
      description
        "the number of ID present in this
         TLV entry";
    }
    container router-id {
      when "../connection-type = 1" {
        description
          "Only applies when
           connection type is Router";
      }
      description
        "originating-router-id";
      leaf-list originating-router-id {
        type yang:dotted-quad;
        description
          "list of the
           originating-router-ids";
      }
    }
    container designated-router-id {
      when "../connection-type = 2" {
        description
          "Only applies when
           connection type is designated Router";
      }
      description
        "originating-router-id";
      list originating-router-id-list {
        description
          "originating-router-id";
        leaf originating-router-id {
          type yang:dotted-quad;
          description
            "originating-router-ids";
        }
        leaf inteface-id {
          type yang:dotted-quad;
          description
            "interface-ids";
        }
      }
    }
  }

  grouping ospfv3-area-router-id-tlv {
    description
      "definition for OSPFv3 Dynamic flooding area
       router-ID TLV";
    leaf start-index {
      type uint16;
      description
        "Starting index of the first
         router/designated router ID";
    }
    leaf last-flag {
      type bits {
        bit last-router-designated-router-id {
          description
            "when set, this TLV is the
             last Index in the full list
             of router IDs for the area";
          reference
            "RFC XXXX: Dynamic
             Flooding on Dense Graphs";
        }
      }
      description
        "dynamic flooding area router-ID
         flag definitions";
    }
    list ospfv3-router-id-tlv-entry {
      description
        "list of OSPFv3 router-ID TLV entries";
      uses ospfv3-area-router-id-tlv-entry;
    }
  }

  grouping flooding-path-tlv {
    description
      "definition for OSPFv2/OSPFv3 Flooding Path TLV";
    leaf start-index {
      type uint16;
      description
        "Starting index of the first
         router/designated router ID";
    }
    leaf-list indices {
      type uint16;
      description
        "index of the next router ID in the
         path";
    }
  }

  grouping flooding-request-bit {
    description
      "definition for adding Floding request bit (FR-bit) to
       LLS type-1 extended options. Need to be defined";
  }

  grouping link-attribute-bits-tlv {
    description
      "definition for link-attribute-bits-tlv, a sub-tlv for
       OSPFv2 Extended link TLV and a sub-tlv for OSPFv3
       router-link TLV";
    leaf link-attributes-bits {
      type bits {
        bit LEEF {
          description
            "when set, conveys which edges
             are currently enabled in the
             flooding topology";
        }
      }
      description
        "link-attributes-bits";
    }
  }

  /*
   * Dynamic flooding config augmentation to OSPF Module
   */

  grouping area-leader-configuration {
    description
      "Enable area leader capability";
    leaf enable {
      type boolean;
      default "false";
      description
        "Enable area leader capability";
    }
    leaf priority {
      type uint8;
      description
        "Area leader priority";
    }
    leaf algorithm {
      type uint8;
      description
        "Dynamic flooding algorithm selection";
    }

  }


  augment
    "/rt:routing/rt:control-plane-protocols/"
  + "rt:control-plane-protocol/ospf:ospf/ospf:areas/ospf:area" {
    if-feature "dynamic-flooding-ospf";
    description
      "Dynamic-flooding config model
       augmentation";
    container dynamic-flooding {
      description
        "to Enable/Disable dynamic flooding
         for this specific OSPF area";
      leaf enable {
        type boolean;
        description
          "Enable/Disable dynamic-flooding";
      }
      container area-leader {
        description
          "Area leader configuration parameters";
        uses area-leader-configuration;
      }
    }
  }

  /*
   * Dynamic flooding state augmentation to OSPF2 module
   */

  augment
    "/rt:routing/rt:control-plane-protocols/"
  + "rt:control-plane-protocol/ospf:ospf/ospf:areas/"
  + "ospf:area/ospf:database/ospf:area-scope-lsa-type/"
  + "ospf:area-scope-lsas/ospf:area-scope-lsa/"
  + "ospf:version/ospf:ospfv2/ospf:ospfv2/ospf:body/ospf:opaque" {
    if-feature "dynamic-flooding-ospf";
    description
      "dynamic flooding TLVs augmentation";
    container area-leader-tlv {
      description
        "Area-leader-tlv";
      uses ospf-area-leader-tlv;
    }
    container dynamic-flooding-tlv {
      description
        "dynamic-flooding-tlv";
      uses dynamic-flooding-tlv;
    }
  }

  augment "/rt:routing/rt:control-plane-protocols/"
        + "rt:control-plane-protocol/ospf:ospf/ospf:areas/"
        + "ospf:area/ospf:database/ospf:area-scope-lsa-type/"
        + "ospf:area-scope-lsas/ospf:area-scope-lsa/"
        + "ospf:version/ospf:ospfv2/ospf:ospfv2/ospf:body" {
    if-feature "dynamic-flooding-ospf";
    description
      "ospfv2-dynamic-flooding-opaque-lsa augmentation";
    container ospfv2-dynamic-flooding-opaque-lsa {
      description
        "OSPFv2 Dynamic flooding opaque LSA.";
      // uses unknown-tlvs;
      container ospfv2-area-router-id-tlv {
        description
          "ospfv2-area-router-id-tlv";
        uses ospfv2-area-router-id-tlv;
      }
      container flooding-path-tlv {
        description
          "ospf flooding-path-tlv";
        uses flooding-path-tlv;
      }
    }
  }

  augment "/rt:routing/rt:control-plane-protocols/"
        + "rt:control-plane-protocol/ospf:ospf/ospf:areas/"
        + "ospf:area/ospf:database/ospf:area-scope-lsa-type/"
        + "ospf:area-scope-lsas/ospf:area-scope-lsa/"
        + "ospf:version/ospf:ospfv2/ospf:ospfv2/ospf:body/"
        + "ospf:opaque/ospf:extended-link-opaque/"
        + "ospf:extended-link-tlv" {
    if-feature "dynamic-flooding-ospf";
    description
      "ospf-link-attributes-bits-tlv augmentation";
    container ospf-link-attributes-bits-tlv {
      description
        "ospf link attributes bits tlv.";
      uses link-attribute-bits-tlv;
    }
  }

  /*
   * Dynamic flooding state augmentation to OSPF3 module
   */

  augment "/rt:routing/rt:control-plane-protocols/"
        + "rt:control-plane-protocol/ospf:ospf/ospf:areas/"
        + "ospf:area/ospf:database/ospf:area-scope-lsa-type/"
        + "ospf:area-scope-lsas/ospf:area-scope-lsa/"
        + "ospf:version/ospf:ospfv3/ospf:ospfv3/ospf:body/"
        + "ospf:router-information" {
    if-feature "dynamic-flooding-ospf";
    description
      "dynamic flooding TLVs augmentation";
    container area-leader-tlv {
      description
        "Area-leader-tlv";
      uses ospf-area-leader-tlv;
    }
    container dynamic-flooding-tlv {
      description
        "dynamic-flooding-tlv";
      uses dynamic-flooding-tlv;
    }
  }

  augment "/rt:routing/rt:control-plane-protocols/"
        + "rt:control-plane-protocol/ospf:ospf/ospf:areas/"
        + "ospf:area/ospf:database/ospf:area-scope-lsa-type/"
        + "ospf:area-scope-lsas/ospf:area-scope-lsa/"
        + "ospf:version/ospf:ospfv3/ospf:ospfv3/ospf:body" {
    if-feature "dynamic-flooding-ospf";
    description
      "ospfv3-dynamic-flooding-opaque-lsa
       augmentation";
    container ospfv3-dynamic-flooding-opaque-lsa {
      description
        "ospfv3-dynamic-flooding-opaque-lsa
         definition";
      //  uses unknown-tlvs;
      container ospfv3-area-router-id-tlv {
        description
          "ospfv3-area-router-id-tlv";
        uses ospfv3-area-router-id-tlv;
      }
      container flooding-path-tlv {
        description
          "ospf flooding-path-tlv";
        uses flooding-path-tlv;
      }
    }
  }
}

<CODE ENDS>
]]></artwork>
       </figure>
     </section>
   </section>

   <section anchor="IS-IS" title="IS-IS Data Model">
     <t>
       This data model augments the <xref
       target="I-D.ietf-isis-yang-isis-cfg">IS-IS YANG model</xref> with
       extensions to support <xref target="I-D.ietf-lsr-dynamic-flooding">Dynamic Flooding</xref>.
     </t>
     <section title="Tree Diagram">
       <figure align="left">
         <artwork align="left"><![CDATA[
module: ietf-isis-dynflood
  augment /rt:routing/rt:control-plane-protocols
            /rt:control-plane-protocol/isis:isis:
    +--rw area-leader
    |  +--rw config
    |     +--rw enable {area-leader}?
    |     |  +--rw value?     boolean
    |     |  +--rw level-1
    |     |  |  +--rw value?   boolean
    |     |  +--rw level-2
    |     |     +--rw value?   boolean
    |     +--rw priority {area-leader}?
    |     |  +--rw value?     uint8
    |     |  +--rw level-1
    |     |  |  +--rw value?   uint8
    |     |  +--rw level-2
    |     |     +--rw value?   uint8
    |     +--rw algorithm {dynamic-flooding}?
    |        +--rw value?     uint8
    |        +--rw level-1
    |        |  +--rw value?   uint8
    |        +--rw level-2
    |           +--rw value?   uint8
    +--rw dynamic-flooding
       +--rw config
          +--rw enable {dynamic-flooding}?
             +--rw value?     boolean
             +--rw level-1
             |  +--rw value?   boolean
             +--rw level-2
                +--rw value?   boolean
  augment /rt:routing/rt:control-plane-protocols
            /rt:control-plane-protocol/isis:isis:
    +--rw area-leader-state
    |  +--rw area-leader?   string
    +--rw area-node-ids {dynamic-flooding}?
    |  +--rw area-node-ids
    |     +--rw node-index* [index]
    |        +--rw index      uint16
    |        +--rw node-id?   isis:extended-system-id
    +--rw dynamic-flooding-paths {dynamic-flooding}?
    |  +--ro paths* []
    |     +--ro path*   uint16
    +--rw dynamic-flooding-topology {dynamic-flooding}?
    |  +--ro paths* []
    |     +--ro path*   string
    +--rw dynamic-flooding-interfaces {dynamic-flooding}?
       +--ro interfaces* []
          +--ro inteface?    string
          +--ro temporary?   boolean
  augment /rt:routing/rt:control-plane-protocols
            /rt:control-plane-protocol/isis:isis/isis:database
            /isis:levels/isis:lsp/isis:router-capabilities
            /isis:router-capability:
    +--ro area-leader
    |  +--ro priority?    uint8
    |  +--ro algorithm?   uint8
    +--ro dynamic-flooding
       +--ro algorithms*   uint8
  augment /rt:routing/rt:control-plane-protocols
            /rt:control-plane-protocol/isis:isis/isis:database
            /isis:levels/isis:lsp:
    +--ro area-node-ids
    |  +--ro starting-index?   uint8
    |  +--ro flags?            bits
    |  +--ro nodes*            isis:extended-system-id
    +--ro flooding-path
       +--ro nodes*   uint16
]]></artwork>
       </figure>
     </section>
     <section title="IS-IS YANG Module">
       <figure align="left">
         <artwork align="left"><![CDATA[
<CODE BEGINS> file "ietf-isis-dynflood@2019-09-01.yang"
module ietf-isis-dynflood {
  yang-version 1.1;

  // IETF:
  namespace "urn:ietf:params:xml:ns:yang:ietf-isis-dynflood";
  // OpenConfig:
  // namespace "http://openconfig.net/yang/openconfig-isis-dynflood";

  prefix isis-dynflood;

  // OpenConfig:
  // import openconfig-network-instance {
  //   prefix oc-netinst;
  // }

  // NB: This module is currently under development and is intended to 
  // augment the IETF IS-IS module (currently 
  // draft-ietf-isis-yang-isis-cfg-36). While that is in process, we are
  // developing against the openconfig model, and references to IETF 
  // paths are commented out.

  // IETF:
  import ietf-routing {
    prefix "rt";
    reference 
      "RFC 8349 - A YANG Data Model for Routing Management 
       (NMDA Version)";
  }

  import ietf-isis {
    prefix "isis";
    reference 
      "RFC ZZZZ: YANG Data Model for IS-IS Protocol";
  }

  organization "IETF LSR Working Group";
  contact "WG List: <mailto:lsr@ietf.org>";
  description "

     First draft of a YANG model for IS-IS dynamic flooding.

     Copyright (c) 2019 IETF Trust and the persons identified as
     authors of the code.  All rights reserved.

     Redistribution and use in source and binary forms, with or
     without modification, is permitted pursuant to, and subject to
     the license terms contained in, the Simplified BSD License set
     forth in Section 4.c of the IETF Trust's Legal Provisions
     Relating to IETF Documents
     (https://trustee.ietf.org/license-info).

     This version of this YANG module is part of RFC XXXX
     (https://www.rfc-editor.org/info/rfcXXXX); see the RFC itself
     for full legal notices.

     The key words 'MUST', 'MUST NOT', 'REQUIRED', 'SHALL', 'SHALL
     NOT', 'SHOULD', 'SHOULD NOT', 'RECOMMENDED', 'NOT RECOMMENDED',
     'MAY', and 'OPTIONAL' in this document are to be interpreted as
     described in BCP 14 (RFC 2119) (RFC 8174) when, and only when,
     they appear in all capitals, as shown here.

  Authors:
    Srinath Dontula
      <mailto:sd947e@att.com>

    Tony Li
      <mailto:tony.li@tony.li>";

  revision 2019-09-01 {
    description "Initial revision";
    reference "RFC XXXX";
  }

  // OpenConfig:
  // typedef extended-system-id {
  //   type string {
  //     pattern
  //       '[0-9A-Fa-f]{4}\.[0-9A-Fa-f]{4}\.[0-9A-Fa-f]{4}\.'
  //       +'[0-9][0-9]';
  //   }
  //   description
  //     "This type defines IS-IS system-id using pattern. The extended
  //      system-id contains the pseudonode number in addition to the
  //      system-id.
  //      An example system-id is 0143.0438.AEF0.00";
  // }

  feature area-leader {
    description "Election of a leader for the area.";
  }

  feature dynamic-flooding {
    if-feature area-leader;
    description "Compute a reduced flooding topology.";
  }

  grouping area-leader-global-cfg {
    description "Enable area leader capability";
    leaf value {
      type boolean;
      default false;
      description "Enable area leader capability";
    }
  }

  grouping area-leader-priority-cfg {
    description "Set the area leader priority";
    leaf value {
      type uint8;
      default 200;
      description "Area leader priority";
    }
  }

  grouping area-leader-algorithm-cfg {
    description "Select the flooding topology computation algorithm";
    leaf value {
      type uint8;
      default 0;
      description "Dynamic flooding algorithm selection";
    }
  }

  grouping area-leader-parameters {
    description "Area leader configuration parameters";
    container area-leader {
      description "Area leader configuration parameters";
      container config {
        description "Area leader configuration";
        container enable {
          if-feature area-leader;
          description "Area leader global enable configuration";
          uses area-leader-global-cfg;
          container level-1 {
            description "level-1 specific configuration";
            uses area-leader-global-cfg;
          }
          container level-2 {
            description "level-2 specific configuration";
            uses area-leader-global-cfg;
          }
        }
  
        container priority {
          if-feature area-leader;
          description "Area leader priority configuration";
          uses area-leader-priority-cfg;
          container level-1 {
            description "level-1 specific configuration";
            uses area-leader-priority-cfg;
          }
          container level-2 {
            description "level-2 specific configuration";
            uses area-leader-priority-cfg;
          }
        }
  
        container algorithm {
          if-feature dynamic-flooding;
          description "Area leader algorithm configuration";
          uses area-leader-algorithm-cfg;
          container level-1 {
            description "level-1 specific configuration";
            uses area-leader-algorithm-cfg;
          }
          container level-2 {
            description "level-2 specific configuration";
            uses area-leader-algorithm-cfg;
          }
        }
      }
    }
  }

  grouping dynamic-flooding-global-cfg {
    description "Enable dynamic flooding capability";
    leaf value {
      type boolean;
      default false;
      description "Enable dynamic flooding capability";
    }
  }

  grouping dynamic-flooding-parameters {
    description "Dynamic flooding configuration parameters";
    container dynamic-flooding {
      description "Dynamic flooding configuration parameters";
      container config {
        description "Dynamic flooding configuration";
        container enable {
          if-feature dynamic-flooding;
          description "Dynamic flooding global enable configuration";
          uses dynamic-flooding-global-cfg;
          container level-1 {
            description "level-1 specific configuration";
            uses dynamic-flooding-global-cfg;
          }
          container level-2 {
            description "level-2 specific configuration";
            uses dynamic-flooding-global-cfg;
          }
        }
      }
    }
  }

  // IETF:
  augment "/rt:routing/rt:control-plane-protocols/"
    +"rt:control-plane-protocol/isis:isis" {
  // OpenConfig:
  // augment "/oc-netinst:network-instances/" +
  //   "oc-netinst:network-instance/oc-netinst:protocols/" +
  //   "oc-netinst:protocol/oc-netinst:isis/oc-netinst:global" {
    description 
      "Area leader and dynamic flooding configuration additions";
    uses area-leader-parameters;
    uses dynamic-flooding-parameters;
  }

  grouping dynamic-flooding-paths {
    description "List of paths in the topology";
    list paths {
      config false;
      description "A list of paths";
      leaf-list path {
        type uint16;
        description "A list of node indicies";
      }
    }
  }

  grouping dynamic-flooding-topology {
    description "List of paths in the topology";
    list paths {
      config false;
      description "A list of paths";
      leaf-list path {
        type string;
        description "A list of node names";
      }
    }
  }

  grouping dynamic-flooding-interfaces {
    description "List of flooding topology interfaces";
    list interfaces {
      config false;
      description "List of interfaces and their temporary status";
      leaf inteface {
        type string;
        description "Interface name";
      }
      leaf temporary {
        type boolean;
        description "Set for partition repair or new adjacencies";
      }
    }
  }

  grouping area-leader-state {
    description "Area leader state information";
    container area-leader-state {
      description "Area leader election result";
      leaf area-leader {
        type string;
        description "Hostname of the area leader";
      }
    }
  }

  grouping dynamic-flooding-state {
    description "State information for dynamic flooding";
    container area-node-ids {
      if-feature dynamic-flooding;
      description "Area node ids and indices";
      container area-node-ids {
        description "List of nodes and indices";
        list node-index {
          key index;
          description "List of nodes and their indices";
          leaf index {
            type uint16;
            description "Index for the node";
          }
          leaf node-id {
            // OpenConfig:
            // type extended-system-id;
            // IETF:
            type isis:extended-system-id;
            description "Node id for the node";
          }
        }
      }
    }
    container dynamic-flooding-paths {
      if-feature dynamic-flooding;
      description "Flooding topology with explicit paths";
      uses dynamic-flooding-paths;
    }
    container dynamic-flooding-topology {
      if-feature dynamic-flooding;
      description "Flooding topology with system names";
      uses dynamic-flooding-topology;
    }
    container dynamic-flooding-interfaces {
      if-feature dynamic-flooding;
      description "Interfaces on the flooding topology";
      uses dynamic-flooding-interfaces;
    }
  }

  // IETF:
  augment "/rt:routing/rt:control-plane-protocols/"
    +"rt:control-plane-protocol/isis:isis" {
  // OpenConfig:
  // augment "/oc-netinst:network-instances/" +
  //   "oc-netinst:network-instance/oc-netinst:protocols/" +
  //   "oc-netinst:protocol/oc-netinst:isis/" +
  //   "oc-netinst:levels/oc-netinst:level/oc-netinst:state" {
    description "Area leader and dynamic flooding state additions";
    uses area-leader-state;
    uses dynamic-flooding-state;
  }

  grouping subtlv27-area-leader {
    description "Router capability subTLV for area leader capability";
    container area-leader {
      description "Area leader subTLV for router capabilities";
      leaf priority {
        type uint8;
        description "Area leader priority";
      }
      leaf algorithm {
        type uint8;
        description 
          "Algorithm index for computing the flooding topology";
      }
    }
  }

  grouping subtlv28-dynamic-flooding {
    description "Dynamic flooding capability subTLV";
    container dynamic-flooding {
      description "Dynamic flooding capability subTLV";
      leaf-list algorithms {
        type uint8;
        description "Supported algorithm indices for distributed mode";
      }
    }
  }

  // OpenConfig:
  // augment "/oc-netinst:network-instances/" +
  //   "oc-netinst:network-instance/" +
  //   "oc-netinst:protocols/oc-netinst:protocol/oc-netinst:isis/" +
  //   "oc-netinst:levels/oc-netinst:level/" +
  //   "oc-netinst:link-state-database/" +
  //   "oc-netinst:lsp/oc-netinst:tlvs/oc-netinst:tlv/" +
  //   "oc-netinst:router-capabilities/oc-netinst:capability/" +
  //   "oc-netinst:subtlvs/oc-netinst:subtlv" {
  // IETF:
  augment "/rt:routing/rt:control-plane-protocols"
    +"/rt:control-plane-protocol/isis:isis"
    +"/isis:database/isis:levels/isis:lsp/isis:router-capabilities/" +
    "isis:router-capability" {
    description 
      "Additional router capability subTLVs for dynamic flooding";
    uses subtlv27-area-leader;
    uses subtlv28-dynamic-flooding;
  }

  grouping tlv17-area-node-ids {
    description "TLV 17: Area Node IDs";
    container area-node-ids {
      description "Dynamic flooding node id assignment TLV";
      leaf starting-index {
        type uint8;
        description "Starting index for the node ids in this TLV.";
      }
      leaf flags {
        type bits {
          bit last {
            position 0;
            description 
              "Set if this is the highest set of indices in the area.";
          }
        }
        description "Flags field in the TLV.";
      }
      leaf-list nodes {
        // OpenConfig:
        // type extended-system-id;
        // IETF:
        type isis:extended-system-id;
        description "Nodes being assigned indices";
      }
    }
  }

  grouping tlv18-flooding-path {
    description "Flooding topology path TLV";
    container flooding-path {
      description "Dynamic flooding path TLV";
      leaf-list nodes {
        type uint16;
        description "Nodes in the path";
      }
    }
  }

  // OpenConfig:
  // augment "/oc-netinst:network-instances/" +
  //   "oc-netinst:network-instance/oc-netinst:protocols/" +
  //   "oc-netinst:protocol/oc-netinst:isis/" +
  //   "oc-netinst:levels/oc-netinst:level/" +
  //   "oc-netinst:link-state-database/" +
  //   "oc-netinst:lsp/oc-netinst:tlvs/oc-netinst:tlv" {
  // IETF:
  augment "/rt:routing/rt:control-plane-protocols" +
    "/rt:control-plane-protocol/isis:isis/isis:database/isis:levels/" +
    "isis:lsp" {
    description "Additional TLVs for dynamic flooding";
    uses tlv17-area-node-ids;
    uses tlv18-flooding-path;
  }
}
<CODE ENDS>
]]></artwork>
       </figure>
     </section>
   </section>


   <section anchor="Acknowledgements" title="Acknowledgements">
     <t>
       The authors would like to thank Derek Yeung, Nidhi Bhaskar, Tom
       Petch, and Kavitha Prasad for their comments and assistance.
     </t>

   </section>

   <section anchor="Security" title="Security Considerations">
     <t>
       This document introduces no new security issues. 
     </t>
   </section>

   <section title="RFC Editor Considerations">
     <t>
       In the body of this document, please replace the following
       strings with RFC numbers for the associated document once it is
       published.
       <list style="hanging">
         <t hangText="AAAA">
           <xref target="I-D.ietf-ospf-yang">YANG Data Model for OSPF Protocol</xref>
         </t>
         <t hangText="XXXX">
           This document
         </t>
         <t hangText="YYYY">
           <xref target="I-D.ietf-lsr-dynamic-flooding">Dynamic
             Flooding on Dense Graphs</xref>
           </t>
           <t hangText="ZZZZ">
             <xref target="I-D.ietf-isis-yang-isis-cfg">YANG Data Model
               for IS-IS Protocol</xref>
           </t>
       </list>
     </t>
     <t>
       Please replace "2019-09-01" with the date of publication.
     </t>
   </section>

   <section title="IANA Considerations">
     <t>
       This document registers two URIs in the IETF XML registry <xref
       target="RFC3688"/>. The following registrations are requested:
     </t>
     <figure align="left">
       <artwork align="left"><![CDATA[
       URI: urn:ietf:params:xml:ns:yang:ietf-dynamic-flooding-ospf
       Registrant Contact: The IESG.
       XML: N/A, the requested URI is an XML namespace.

       URI: urn:ietf:params:xml:ns:yang:ietf-isis-dynflood
       Registrant Contact: The IESG.
       XML: N/A, the requested URI is an XML namespace.
]]></artwork>
     </figure>
     <t>
       This document registers two YANG modules in the YANG Module Names
       registry <xref target="RFC6020"/>.
     </t>
     <figure align="left">
       <artwork align="left"><![CDATA[
       name: ietf-ospf-df
       namespace: urn:ietf:params:xml:ns:yang:ietf-dynamic-flooding-ospf
       prefix: ospf-df
       reference: RFC XXXX

       name: ietf-isis-dynflood
       namespace: urn:ietf:params:xml:ns:yang:ietf-isis-dynflood
       prefix: isis-dynflood
       reference: RFC XXXX
]]></artwork>
     </figure>
   </section>

 </middle>

 <!--  *****BACK MATTER ***** -->

 <back>
   <!-- References split into informative and normative -->

   <!-- There are 2 ways to insert reference entries from the citation libraries:
    1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
    2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
       (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")

    Both are cited textually in the same manner: by using xref elements.
    If you use the PI option, xml2rfc will, by default, try to find included files in the same
    directory as the including file. You can also define the XML_LIBRARY environment variable
    with a value containing a set of directories to search.  These can be either in the local
    filing system or remote ones accessed by http (http://domain/dir/... ).-->

   <references title="Normative References">

     <!--?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?-->
     &RFC2119;
     &RFC3688;
     &RFC6020;
     &RFC7950;
     &RFC8174;
     &RFC8342;
     &DynamicFlooding;
     &IsisYANG;
     &OSPFYANG;
   </references>
   <references title="Informative References">

     <reference anchor="ISO10589">
       <front>
         <title>
           Intermediate System to Intermediate System
           Intra-Domain Routing Exchange Protocol for use in Conjunction
           with the Protocol for Providing the Connectionless-mode Network
           Service (ISO 8473)
         </title>
         <author>
           <organization abbrev="ISO">
             International Organization for Standardization
           </organization>
         </author>
         <date year="2002" month="Nov."/>
       </front>
       <seriesInfo name="ISO/IEC" value="10589:2002"/>
     </reference>

     &RFC2328;
     &RFC8340;
   </references>
</back>
</rfc>
